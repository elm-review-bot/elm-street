<div id="elm"></div>
<script src="main.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCTGFwI-OXNVmj6R2iVLjipaUotFMyyDyo&libraries=places"></script>
<script>    
    var node = document.getElementById('elm');
    var app = Elm.ElmStreet.Main.embed(node);

    app.ports.predictAddress.subscribe(function(text) {
      if(!text) { return; }
      var service = new google.maps.places.AutocompleteService();
      var options = { input: text, componentRestrictions: {country: "de"}, types: ['address'] }
      service.getPlacePredictions(options, function(predictions, status) {
        app.ports.addressPredictions.send(predictions);
      });
    });


    app.ports.getAddressDetails.subscribe(function(text) {
      var request = { placeId: text };
      var service = new google.maps.places.PlacesService(document.createElement('div'));
      service.getDetails(request, function(place, status) {
        app.ports.addressDetails.send(JSON.stringify(place));
      });
    });

</script>
